---
layout: post
title: ceph客户端条带化
tags:
- ceph
categories: ceph
description: ceph源代码分析
---


这里我们在具体介绍ceph的客户端（RadosClient)之前，我们会先介绍一下数据的条带化(stripe)。

<!-- more -->

## 1. 什么是条带化

条带(stripe)是把连续的数据分割成大小相同的数据块，把每段数据分别写入到阵列中的不同磁盘上的方法。简单的说，条带是一种将多个磁盘驱动器合并为一个卷的方法。许多情况下，这是通过硬件控制器来完成的。

当多个进程同时访问一个磁盘时，可能会出现磁盘冲突。大多数磁盘系统都对访问次数（每秒的IO操作，IOPS）和数据传输率(每秒传输的数据量，TPS）有限制。当达到这些限制时，后面需要访问磁盘的IO请求就需要等待，这时就是所谓的磁盘冲突。避免磁盘冲突是优化IO性能的一个重要指标，而IO性能的优化与其他资源（如CPU和内存）的优化有着很大的区别，IO优化最有效的手段是将IO最大限度的进行平衡。

条带化技术就是一种自动的将IO的负载均衡到多个物理磁盘上的技术，条带化技术就是将一块连续的数据分成很多小部分并把它们分别存储到不同磁盘上去。这就能使多个进程同时访问数据的多个不同部分而不会造成磁盘冲突，而且在需要对这种数据进行顺序访问的时候可以获得最大程度上的IO并行能力，从而获得非常好的性能。由于条带化在IO性能问题上的优越表现，以至于在应用系统所在的计算环境中的多个层次或平台都涉及到了条带化技术，如操作系统和存储系统这两个层次中都可使用条带化技术。

条带化后，```条带卷```所能提供的速速比单个盘所能提供的速度要快很多。由于现在存储技术成熟，大多数系统都采用条带化来实现系统的IO负载分担，如果OS有LVM软件或者硬件条带设备，决定因数是```条带深度```(stripe depth)和```条带宽度```(stripe width)。

1） **条带深度**

2) **条带宽度**








<br />
<br />

**[参看]**

1. [Ceph 的物理和逻辑结构](https://www.cnblogs.com/sammyliu/p/4836014.html)

2. [小甲陪你一起看Ceph](https://cloud.tencent.com/developer/article/1428004)

3. [Ceph 分布式存储架构解析与工作原理](https://www.cnblogs.com/jmilkfan-fanguiju/p/11825073.html#_71)

4. [什么是条带化(striping) ？](https://blog.csdn.net/jlds123/article/details/11813313)

<br />
<br />
<br />

